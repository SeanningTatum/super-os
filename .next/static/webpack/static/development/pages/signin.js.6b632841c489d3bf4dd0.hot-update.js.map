{"version":3,"file":"static/webpack/static/development/pages/signin.js.6b632841c489d3bf4dd0.hot-update.js","sources":["webpack:///./components/SigninBox.js"],"sourcesContent":["import {Mutation, withApollo} from 'react-apollo'\nimport gql from 'graphql-tag'\n\nimport redirect from '../lib/redirect'\nimport AuthService from '../utils/authService'\n\nconst SIGN_IN = gql`\n  mutation login($email: String!, $password: String!) {\n    login(email: $email, password: $password)\n  }\n`\n\n// TODO: Find a better name for component.\nconst SigninBox = ({client}) => {\n  let email; let password\n\n  return (\n    <Mutation\n      mutation={SIGN_IN}\n      onCompleted={data => {\n        console.log('token', data.login)\n        // Store the token in cookie\n        AuthService.setToken(data.login, data.login)\n\n        // // Force a reload of all the current queries now that the user is\n        // // logged in\n        client.cache.reset().then(() => {\n          redirect({}, '/')\n        })\n      }}\n      onError={error => {\n        // If you want to send error to external service?\n        console.log(error)\n      }}\n    >\n      {(signin, {data, error}) => (\n        <form\n          onSubmit={e => {\n            e.preventDefault()\n            e.stopPropagation()\n\n            signin({\n              variables: {\n                email: email.value,\n                password: password.value,\n              },\n            })\n\n            email.value = password.value = ''\n          }}\n        >\n          {error && <p>No user found with that information.</p>}\n          <input\n            name=\"email\"\n            placeholder=\"Email\"\n            ref={node => {\n              email = node\n            }}\n          />\n          <br />\n          <input\n            name=\"password\"\n            placeholder=\"Password\"\n            ref={node => {\n              password = node\n            }}\n            type=\"password\"\n          />\n          <br />\n          <button>Sign in</button>\n        </form>\n      )}\n    </Mutation>\n  )\n}\n\nexport default withApollo(SigninBox)\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AAEA;AACA;AAEA;AACA;AAMA;AAAA;AACA;AAAA;AAEA;AAEA;AACA;AACA;AACA;AACA;AAGA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAhBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAkBA;AAAA;AAAA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AAFA;AADA;AAOA;AACA;AAbA;AAAA;AAAA;AAAA;AAAA;AAAA;AAeA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AALA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AANA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAlCA;AAuCA;AACA;AACA;;;;;;;A","sourceRoot":""}