{"version":3,"file":"static/webpack/static/development/pages/signin.js.b1b3cff13bcbf106607d.hot-update.js","sources":["webpack:///./utils/authService.js"],"sourcesContent":["import jwtDecode from 'jwt-decode'\nimport Cookie from 'js-cookie'\n\nconst getQueryParams = () => {\n  const params = {}\n  window.location.href.replace(/([^(?|#)=&]+)(=([^&]*))?/g, ($0, $1, $2, $3) => {\n    params[$1] = $3\n  })\n  return params\n}\n\nclass AuthService {\n  setToken = (idToken, accessToken) => {\n    if (!process.browser) {\n      return\n    }\n    Cookie.set('user', jwtDecode(idToken))\n    Cookie.set('idToken', idToken)\n    // Cookie.set('accessToken', accessToken)\n  }\n\n  unsetToken = () => {\n    if (!process.browser) {\n      return\n    }\n    Cookie.remove('idToken')\n    // Cookie.remove('accessToken')\n    Cookie.remove('user')\n\n    // to support logging out from all windows\n    window.localStorage.setItem('logout', Date.now())\n  }\n\n  getUserFromServerCookie = req => {\n    if (!req.headers.cookie) {\n      return undefined\n    }\n    const jwtCookie = req.headers.cookie.split(';').find(c => c.trim().startsWith('idToken='))\n    if (!jwtCookie) {\n      return undefined\n    }\n    const jwt = jwtCookie.split('=')[1]\n    return jwtDecode(jwt)\n  }\n\n  getUserFromLocalCookie = () => Cookie.getJSON('user')\n}\n\nconst authService = new AuthService()\n\nexport default authService\n"],"mappings":";;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA;AACA,iBAEA;AACA;AAAA;AACA;AAEA;AACA;AACA;AACA,iBAEA;AACA;AAAA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;;;AAGA;AAEA;;;;A","sourceRoot":""}